'use client';


import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent } from '@/components/ui/card';
import { cn } from '@/lib/utils';
// no header image by request

const BUY_ANSWERS = [
  'Yeah, you should buy it.',
  'Looks good. Pull the trigger.',
  'If you really want it, grab it.',
  'This one belongs in your collection.',
  'Only buy it if you love it.',
  'It’s fine, but you don’t need it.',
  'Pass. This one is not worth it.',
  'Condition and price don’t line up. Skip it.',
  'Wait for a cleaner copy.',
  'Hold off. A better deal will show up.',
];

const SELL_ANSWERS = [
  'Yeah, you should sell it.',
  'Move it and upgrade later.',
  'Dump it. You won’t miss it.',
  'Sell it and chase something you actually want.',
  'Easy to replace? Then list it.',
  'Keep it. You’re not done with this one.',
  'Hold it a bit longer.',
  'If you still like it, don’t sell it.',
  'This belongs in your collection, not on a sales table.',
  'Sell something you care about less.',
];

function getRandomAnswer(kind) {
  const pool = kind === 'BUY' ? BUY_ANSWERS : SELL_ANSWERS;
  const idx = Math.floor(Math.random() * pool.length);
  return pool[idx];
}

function AskHobbyDork() {
  const [answer, setAnswer] = useState(null);
  const [isShaking, setIsShaking] = useState(false);
  const [reveal, setReveal] = useState(false);

  const handleAsk = (kind) => {
    setIsShaking(true);
    setReveal(false);
    setTimeout(() => {
      setAnswer(getRandomAnswer(kind));
      setIsShaking(false);
      setReveal(true);
    }, 400);
  };

  return (
    <Card className="border-none bg-gradient-to-br from-slate-900 to-slate-800 text-white">
      <CardContent className="pt-4 space-y-4">
        <div className="flex flex-col items-center space-y-3">
          <div className="w-full flex justify-center">
            <img src="/ask.png" alt="Ask HobbyDork" className="w-40 sm:w-56 object-contain" />
          </div>

          <div className="w-full flex flex-col gap-3">
            <Button
              type="button"
              size="sm"
              className="w-full bg-emerald-500 hover:bg-emerald-600"
              onClick={() => handleAsk('BUY')}
            >
              Should I buy?
            </Button>

            <Button
              type="button"
              size="sm"
              variant="outline"
              className="w-full border-red-500 text-red-400 hover:bg-red-500/10"
              onClick={() => handleAsk('SELL')}
            >
              Should I sell?
            </Button>
          </div>
        </div>
        <div
          className={cn(
            'mt-2 flex items-center justify-center rounded-xl border border-transparent bg-gradient-to-r from-purple-700/40 via-indigo-700/30 to-blue-600/40 px-4 text-center text-sm shadow-inner aspect-square w-full sm:w-64 md:w-72',
            isShaking && 'animate-pulse',
          )}
        >
          {answer ? (
            <div className="w-full flex flex-col items-center justify-center">
              <span
                className={cn(
                  'transition-all duration-700 ease-out text-base font-semibold',
                  reveal
                    ? 'blur-0 opacity-100 scale-100'
                    : 'blur-2xl opacity-40 scale-110',
                  'select-none',
                )}
                style={{
                  filter: reveal
                    ? 'none'
                    : 'blur(12px) contrast(0.5) grayscale(0.8)',
                  transition: 'all 0.7s cubic-bezier(.4,2,.6,1)',
                }}
              >
                {answer}
              </span>
            </div>
          ) : (
            <p className="text-slate-500 text-sm">
              Ask the Dork to reveal the answer you seek.
            </p>
          )}
        </div>
      </CardContent>
    </Card>
  );
}

export default AskHobbyDork;
