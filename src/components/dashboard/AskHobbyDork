'use client';


import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent } from '@/components/ui/card';
import { cn } from '@/lib/utils';
// no header image by request

const BUY_ANSWERS = [
  'Yeah, you should buy it.',
  'Looks good. Pull the trigger.',
  'If you really want it, grab it.',
  'This one belongs in your collection.',
  'Only buy it if you love it.',
  'It’s fine, but you don’t need it.',
  'Pass. This one is not worth it.',
  'Condition and price don’t line up. Skip it.',
  'Wait for a cleaner copy.',
  'Hold off. A better deal will show up.',
];

const SELL_ANSWERS = [
  'Yeah, you should sell it.',
  'Move it and upgrade later.',
  'Dump it. You won’t miss it.',
  'Sell it and chase something you actually want.',
  'Easy to replace? Then list it.',
  'Keep it. You’re not done with this one.',
  'Hold it a bit longer.',
  'If you still like it, don’t sell it.',
  'This belongs in your collection, not on a sales table.',
  'Sell something you care about less.',
];

function getRandomAnswer(kind) {
  const pool = kind === 'BUY' ? BUY_ANSWERS : SELL_ANSWERS;
  const idx = Math.floor(Math.random() * pool.length);
  return pool[idx];
}

function AskHobbyDork() {
  const [answer, setAnswer] = useState(null);
  const [isShaking, setIsShaking] = useState(false);
  const [reveal, setReveal] = useState(false);

  const handleAsk = (kind) => {
    setIsShaking(true);
    setReveal(false);
    setTimeout(() => {
      setAnswer(getRandomAnswer(kind));
      setIsShaking(false);
      setReveal(true);
    }, 400);
  };

  return (
    <Card className="border-none bg-gradient-to-br from-slate-900 to-slate-800 text-white">
      <CardContent className="pt-4 space-y-4">
        <div className="flex flex-col items-center space-y-3">
          <div className="w-full flex justify-center">
            <img src="/ask.png" alt="Ask HobbyDork" className="w-56 sm:w-72 object-contain" />
          </div>

          <div className="w-full flex flex-col gap-3 items-center">
            <Button
              type="button"
              size="sm"
              className="w-full bg-red-800 hover:bg-red-900 text-white text-xl font-extrabold uppercase py-3 rounded-sm shadow-inner border-2 border-black"
              onClick={() => handleAsk('BUY')}
            >
              SHOULD I BUY?
            </Button>

            <div className="text-lg uppercase font-extrabold text-slate-200 my-1">OR</div>

            <Button
              type="button"
              size="sm"
              className="w-full bg-emerald-500 hover:bg-emerald-600 text-white text-xl font-extrabold uppercase py-3 rounded-sm shadow-inner border-2 border-black"
              onClick={() => handleAsk('SELL')}
            >
              SHOULD I SELL?
            </Button>
          </div>
        </div>
        <div className="mt-4 w-full text-center">
          <div className="text-sm font-bold uppercase text-slate-300 mb-2">Answer:</div>
          <div
            className={cn(
              'w-full rounded-lg border-4 border-purple-900 bg-gradient-to-r from-purple-700 to-purple-600 px-6 py-4 text-center text-white shadow-lg',
              isShaking && 'animate-pulse',
            )}
          >
            {answer ? (
              <span
                className={cn(
                  'transition-all duration-700 ease-out text-lg font-extrabold uppercase tracking-wide',
                  reveal ? 'blur-0 opacity-100 scale-100' : 'blur-2xl opacity-60 scale-105',
                  'select-none',
                )}
                style={{
                  filter: reveal ? 'none' : 'blur(14px) contrast(0.35) grayscale(0.5)',
                  transition: 'all 0.7s cubic-bezier(.4,2,.6,1)',
                }}
              >
                {answer}
              </span>
            ) : (
              <span className="text-white font-extrabold uppercase">LET THE DORK DECIDE YOUR FATE...</span>
            )}
          </div>
        </div>
      </CardContent>
    </Card>
  );
}

export default AskHobbyDork;
